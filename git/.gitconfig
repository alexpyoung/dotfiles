# https://git-scm.com/docs/git-config
[include]
  path = ~/.gitconfig.local
[user]
  name = Alex Young
  useConfigOnly = true
[alias]
  choose = !git $(git aliases no-color | fzf | cut -d' ' -f1)

  # Working
  a = !git add --intent-to-add . && git add --patch
  c = commit
  wip = !git a && git c --message='wip'
  untrack = rm --cache --
  shake = !git branch --merged | grep -v '\\*' | xargs -n 1 git branch --delete
  edit = !vim $(git status --short | fzf | cut -c 4-)

  # Reset
  back = !git reset --soft HEAD~ && git reset && git d
  undo = reset --hard HEAD~
  clear = reset --hard HEAD
  wipe = !git checkout -- $(git status --short | fzf | cut -c 4-)
  save = !git reset && git a && git c
  rho = !git fo && git reset --hard origin/$(git name)

  # Checkout
  co = checkout
  com = checkout master
  cob = checkout -b
  recent = !git for-each-ref --sort='-committerdate' --format='%(refname)%09%(committerdate:relative)' refs/heads | sed -e 's-refs/heads/--' | fzf | xargs echo | cut -d' ' -f1 | xargs git co

  # Stash
  store = !git a && git stash
  soon = !git add . && git stash
  stl = stash list
  sts = stash show
  stp = stash pop
  sta = stash apply

  # Diff
  d = !git add --intent-to-add . && git diff
  dsg = d --staged
  dr = !git fo && git d origin/$(git name) HEAD
  dom = !git fo && git d origin/master HEAD

  # Rebase
  rbi = rebase --interactive
  rbm = !git fo && git rebase origin/master
  rbmi = !git fo && git rbi origin/master
  rbc = !git a && git rebase --continue
  rba = rebase --abort
  rbfz = !git rbi $(git tree | fzf | cut -d' ' -f2)~
  squash = "!f() { git a; git c --fixup=$1; git rbi --autosquash $1~; }; f"
  fix = !git squash $(git tree | fzf | cut -d' ' -f2)

  # Remote
  p = push
  force = push --force
  fo = fetch origin --tags
  publish = !git name | xargs git push --set-upstream origin
  tg = "!f() { git tag $1; git push origin tags/$1; }; f"
  untag = "!f() { git tag -d $1; git push origin :refs/tags/$1; }; f"

  # Info
  st = status
  last = show HEAD
  name = rev-parse --abbrev-ref HEAD
  tree = log --graph --date=relative --pretty=tree
  stat = !git add --intent-to-add . && git --no-pager diff --stat && git --no-pager diff --numstat
  changelog = !git log --oneline | fzf | cut -d' ' -f1 | xargs -I _ git log --oneline --pretty=diff _~..HEAD | sed -e 's/^/- /'
  users = shortlog --summary --numbered
[branch]
  autoSetupRebase = always
[commit]
  gpgsign = true
  verbose = true
[core]
  excludesfile = ~/.gitignore
  editor = vim
[diff "applescript"]
  textconv = osadecompile
  binary = true
[fetch]
  prune = true
[filter "lfs"]
  clean = git-lfs clean -- %f
  process = git-lfs filter-process
  required = true
  smudge = git-lfs smudge -- %f
[help]
  autocorrect = 1
[merge]
  ff = only
[pager]
  diff = diff-so-fancy | less --tabs=2 -RFX
  show = diff-so-fancy | less --tabs=2 -RFX
[pull]
  rebase = true
  ff = only
[push]
  followTags = true
  current = true
[pretty]
  tree = "%Cgreen%h%Creset -%C(auto)%d%Creset %s %Cblue(%an %ad)%Creset"
  diff = "[%h] %s (%aN)"
[rebase]
  autoStash = true
  stat = true
[rerere]
  enabled = true
  autoUpdate = true
[stash]
  showPatch = true
[status]
  showStash = true
  showUntrackedFiles = all
[tag]
  sort = version:refname
[url "ssh://git@github.com/"]
  insteadOf = https://github.com/
