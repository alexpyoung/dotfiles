#!/usr/bin/env bash

set -euo pipefail

check() {
    shellcheck --exclude=SC1071 --shell=bash $1
}

main() {
    local -r ROOT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd)/.."
    pushd $ROOT_DIR > /dev/null
    export -f check
    check "$(file bin/**/* | grep executable | cut -d: -f1)"
    check git/bin/*
    check zsh/.aliases zsh/.exports zsh/.functions
    check zsh/.oh-my-zsh/custom/plugins/**/*.zsh
    popd > /dev/null
    local -r GREEN='\033[0;32m'
    local -r RESET='\033[0m'
    printf "${GREEN}✔︎${RESET} shellcheck passed\n"
}

main
